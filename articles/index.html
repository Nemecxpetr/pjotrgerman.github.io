<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="robots" content="noindex,nofollow,noarchive" />
  <meta name="description" content="Unlisted research article with interactive keyword map." />
  <title>Articles</title>

  <link rel="icon" type="image/png" href="../assets/favicon_1.png" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;500;600&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="https://unpkg.com/vis-network@9.1.9/styles/vis-network.min.css" />
  <link rel="stylesheet" href="article-layout.css" />
</head>
<body>
  <div class="mask-layer" aria-hidden="true">
    <img id="maskImg" class="mask-img" src="../assets/background.jpg" alt="" decoding="async" />
  </div>
  <canvas
    id="fx"
    data-wrap-selector=".essay-layout"
    data-active-zone-selector=".article-pane, .context-preview"
    data-mask-area-selector=".article-pane, .context-preview"
    data-word-source-selector="#article-content"
    data-emit-only-mini-mode="true"
    aria-hidden="true">
  </canvas>

  <main class="essay-layout">
    <header class="desktop-page-header" aria-label="Article header">
      <p class="eyebrow">Unlisted Essay</p>
      <h1 id="article-title-desktop">Loading article...</h1>
      <p class="subtitle" id="article-subtitle-desktop"></p>
    </header>

    <section class="map-pane" aria-label="Keyword map">
      <header class="map-header">
        <p class="eyebrow">Unlisted Essay</p>
        <h1 id="article-title">Loading article...</h1>
        <p class="subtitle" id="article-subtitle"></p>
      </header>
      <div id="mind-map" class="mind-map"></div>
      <p class="map-help">Drag nodes to reorganize. Click a term to jump to its section.</p>
    </section>

    <div
      class="pane-resizer"
      id="pane-resizer"
      role="separator"
      aria-orientation="horizontal"
      aria-label="Resize graph and article panes"
      tabindex="0">
    </div>

    <section class="article-pane" id="article-pane" aria-label="Article text">
      <div id="article-content" class="article-content">
        <p class="loading">Loading content...</p>
      </div>
    </section>

    <div
      class="column-resizer"
      id="column-resizer"
      role="separator"
      aria-orientation="vertical"
      aria-label="Resize text and graph columns"
      tabindex="0">
    </div>

    <aside class="context-preview" id="context-preview" aria-live="polite" aria-label="Context preview">
      <h2 class="context-preview-title" id="context-preview-title"></h2>
      <p class="context-preview-meta" id="context-preview-meta"></p>
      <div class="context-preview-body" id="context-preview-body"></div>
    </aside>
  </main>
  <footer class="print-copyright">(c) Petr NÄ›mec</footer>

  <script>
    (function () {
      const params = new URLSearchParams(window.location.search);
      const printFlag = String(params.get("print") || "").trim().toLowerCase();
      const isPrintMode = printFlag === "1" || printFlag === "true" || printFlag === "yes";
      if (!isPrintMode) {
        return;
      }
      document.body.dataset.soundToggle = "off";
      document.documentElement.classList.add("print-mode");
      document.body.classList.add("print-mode");
    })();
  </script>
  <script src="https://unpkg.com/vis-network@9.1.9/dist/vis-network.min.js"></script>
  <script type="module" src="../main.js"></script>
  <script type="module" src="article-page.js"></script>
</body>
</html>
